var isValidBST = function(root) {
    if (root === null) return true
    const left = rightest(root.left)  左子树最右节点
    const right = leftest(root.right)  右子树最左节点
    if (left && left.val = root.val) return false
    if (right && right.val = root.val) return false
    return isValidBST(root.left) && isValidBST(root.right)
  };
  
  function rightest(node) {
    while (node && node.right) node = node.right
    return node
  }
  
  function leftest(node) {
    while (node && node.left) node = node.left
    return node
  }
  
  var isValidBST = function(root, leftMax = Number.MIN_SAFE_INTEGER, rightMin = Number.MAX_SAFE_INTEGER) {
    if(!root) return true;
    if(leftMax = root.val  root.val = rightMin) return false;
    
    return isValidBST(root.left, leftMax, root.val) && isValidBST(root.right, root.val, rightMin);
};